FROM node:20-alpine

COPY package*.json ./

RUN npm install

COPY . .

ARG FRONTEND_ORIGIN
ARG REDIS_URL
ARG SOCKET_PORT

ENV FRONTEND_ORIGIN=$FRONTEND_ORIGIN
ENV REDIS_URL=$REDIS_URL
ENV SOCKET_PORT=$SOCKET_PORT

EXPOSE 5001

CMD ["node", "main.js"]